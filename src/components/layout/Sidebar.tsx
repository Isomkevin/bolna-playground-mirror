
import React from 'react';
import { Link, useLocation } from 'react-router-dom';
import { 
  Settings, History, Hash, BookOpen, Layers, 
  Mic, Code, LibraryBig, User, ChevronLeft, ChevronRight 
} from 'lucide-react';
import { cn } from '@/lib/utils';

const navItems = [
  { 
    icon: Settings, 
    label: 'Agent Setup', 
    path: '/agent-setup',
  },
  { 
    icon: History, 
    label: 'Call History', 
    path: '/call-history',
  },
  { 
    icon: Hash, 
    label: 'My numbers', 
    path: '/phone-numbers',
  },
  { 
    icon: BookOpen, 
    label: 'Knowledge Base', 
    path: '/knowledge-base',
  },
  { 
    icon: Layers, 
    label: 'Batches', 
    path: '/batches',
  },
  { 
    icon: Mic, 
    label: 'Voice Lab', 
    path: '/voices',
  },
  { 
    icon: Code, 
    label: 'Developers', 
    path: '/developers',
  },
  { 
    icon: LibraryBig, 
    label: 'Providers', 
    path: '/providers',
  },
];

interface SidebarProps {
  collapsed?: boolean;
  onToggle?: () => void;
}

const Sidebar: React.FC<SidebarProps> = ({ collapsed = false, onToggle }) => {
  const location = useLocation();
  
  return (
    <div className="h-screen border-r border-bolna-border fixed left-0 top-0 w-full bg-white z-10 flex flex-col">
      <div className="p-4 border-b border-bolna-border h-[72px] flex items-center justify-between">
        <Link to="/" className={cn("flex items-center", collapsed ? "justify-center" : "")}>
          {collapsed ? (
            <div className="w-8 h-8 bg-bolna-blue rounded-full flex items-center justify-center text-white font-bold">
              B
            </div>
          ) : (
            <BolnaLogo />
          )}
        </Link>
        <button 
          className="md:flex hidden items-center justify-center w-8 h-8 rounded-full hover:bg-gray-100 transition-colors"
          onClick={onToggle}
        >
          {collapsed ? (
            <ChevronRight className="h-5 w-5 text-gray-500" />
          ) : (
            <ChevronLeft className="h-5 w-5 text-gray-500" />
          )}
        </button>
      </div>
      <nav className="py-4 flex-1 overflow-y-auto">
        <ul className="space-y-1 px-2">
          {navItems.map((item) => (
            <li key={item.path}>
              <Link
                to={item.path}
                className={cn(
                  "flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",
                  location.pathname === item.path || location.pathname.startsWith(item.path + '/')
                    ? "text-bolna-blue bg-bolna-lightBlue"
                    : "text-gray-700 hover:bg-gray-100",
                  collapsed && "justify-center"
                )}
                title={collapsed ? item.label : undefined}
              >
                <item.icon className="h-5 w-5 flex-shrink-0" />
                {!collapsed && <span>{item.label}</span>}
              </Link>
            </li>
          ))}
        </ul>
      </nav>
      <div className={cn(
        "p-4 flex", 
        collapsed ? "justify-center" : "justify-center"
      )}>
        <button className="p-3 rounded-full border border-bolna-border hover:bg-gray-100 transition-colors">
          <User className="h-5 w-5 text-gray-700" />
        </button>
      </div>
    </div>
  );
};

// Bolna Logo SVG component
const BolnaLogo = () => (
  <svg width="106" height="36" viewBox="0 0 106 36" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M7.66 22.78C7.66 23.56 7.82 24.18 8.14 24.64C8.46 25.08 8.96 25.3 9.64 25.3C10.32 25.3 10.82 25.08 11.14 24.64C11.46 24.18 11.62 23.56 11.62 22.78V13.54C11.62 12.76 11.46 12.14 11.14 11.68C10.82 11.22 10.32 10.99 9.64 10.99C8.96 10.99 8.46 11.22 8.14 11.68C7.82 12.14 7.66 12.76 7.66 13.54V22.78ZM3.5 13.36C3.5 11.04 4.06 9.27 5.18 8.05C6.3 6.83 7.76 6.22 9.56 6.22C10.4 6.22 11.14 6.36 11.78 6.64C12.44 6.9 13.02 7.26 13.52 7.72V0.77H17.68V27.07H13.52V25.91C13.02 26.37 12.44 26.74 11.78 27.02C11.14 27.3 10.4 27.44 9.56 27.44C7.76 27.44 6.3 26.83 5.18 25.61C4.06 24.39 3.5 22.62 3.5 20.3V13.36ZM26.904 23.41C27.004 24.09 27.244 24.58 27.624 24.88C28.024 25.16 28.584 25.3 29.304 25.3C29.884 25.3 30.344 25.14 30.684 24.82C31.024 24.5 31.194 24.08 31.194 23.56C31.194 23.12 31.054 22.76 30.774 22.48C30.494 22.18 30.024 21.9 29.364 21.64L26.784 20.54C25.804 20.12 25.054 19.56 24.534 18.86C24.034 18.14 23.784 17.29 23.784 16.31C23.784 15.41 24.004 14.62 24.444 13.94C24.884 13.26 25.504 12.73 26.304 12.35C27.104 11.97 28.034 11.78 29.094 11.78C30.914 11.78 32.334 12.24 33.354 13.16C34.394 14.08 34.944 15.34 35.004 16.94H31.074C31.014 16.32 30.824 15.87 30.504 15.59C30.184 15.29 29.704 15.14 29.064 15.14C28.504 15.14 28.084 15.28 27.804 15.56C27.524 15.82 27.384 16.15 27.384 16.55C27.384 16.91 27.514 17.22 27.774 17.48C28.034 17.74 28.434 17.99 28.974 18.23L31.554 19.33C32.614 19.79 33.424 20.38 33.984 21.1C34.544 21.82 34.824 22.74 34.824 23.86C34.824 24.74 34.584 25.52 34.104 26.18C33.644 26.84 32.994 27.36 32.154 27.74C31.314 28.1 30.334 28.28 29.214 28.28C27.274 28.28 25.774 27.8 24.714 26.84C23.654 25.86 23.104 24.49 23.064 22.73L26.904 23.41ZM43.153 15.29C42.613 15.29 42.133 15.4 41.713 15.62C41.293 15.84 40.963 16.17 40.723 16.61C40.483 17.05 40.363 17.6 40.363 18.26C40.363 18.92 40.483 19.47 40.723 19.91C40.963 20.35 41.293 20.68 41.713 20.9C42.133 21.12 42.613 21.23 43.153 21.23C43.693 21.23 44.173 21.12 44.593 20.9C45.013 20.68 45.343 20.35 45.583 19.91C45.823 19.47 45.943 18.92 45.943 18.26C45.943 17.6 45.823 17.05 45.583 16.61C45.343 16.17 45.013 15.84 44.593 15.62C44.173 15.4 43.693 15.29 43.153 15.29ZM43.153 24.16C41.873 24.16 40.753 23.88 39.793 23.32C38.853 22.74 38.123 21.95 37.603 20.95C37.083 19.95 36.823 18.84 36.823 17.62C36.823 16.38 37.083 15.27 37.603 14.29C38.123 13.31 38.853 12.54 39.793 11.98C40.753 11.4 41.873 11.11 43.153 11.11C44.433 11.11 45.543 11.4 46.483 11.98C47.423 12.54 48.153 13.31 48.673 14.29C49.193 15.27 49.453 16.38 49.453 17.62C49.453 18.84 49.193 19.95 48.673 20.95C48.153 21.95 47.423 22.74 46.483 23.32C45.543 23.88 44.433 24.16 43.153 24.16ZM57.5223 15.32C56.9423 15.32 56.4323 15.44 55.9923 15.68C55.5523 15.92 55.2023 16.27 54.9423 16.73C54.6823 17.19 54.5523 17.74 54.5523 18.38C54.5523 19.02 54.6823 19.57 54.9423 20.03C55.2023 20.49 55.5523 20.84 55.9923 21.08C56.4323 21.32 56.9423 21.44 57.5223 21.44C58.3623 21.44 59.0323 21.17 59.5323 20.63C60.0323 20.09 60.3023 19.34 60.3423 18.38C60.3023 17.42 60.0323 16.67 59.5323 16.13C59.0323 15.59 58.3623 15.32 57.5223 15.32ZM63.5823 27.05H59.6923V23.27C59.1723 23.63 58.5923 23.9 57.9523 24.08C57.3123 24.26 56.6523 24.35 55.9723 24.35C54.8723 24.35 53.8723 24.07 52.9723 23.51C52.0723 22.95 51.3623 22.17 50.8423 21.17C50.3223 20.17 50.0623 17.58 50.0623 17.58C50.0623 16.26 50.3223 15.09 50.8423 14.07C51.3623 13.05 52.0723 12.26 52.9723 11.7C53.8723 11.14 54.8723 10.86 55.9723 10.86C56.6923 10.86 57.3823 10.97 58.0423 11.19C58.7023 11.39 59.2723 11.7 59.7523 12.12V11.17H63.5823V27.05ZM73.8831 15.5C73.3631 15.5 72.9131 15.61 72.5331 15.83C72.1531 16.05 71.8531 16.36 71.6331 16.76C71.4131 17.16 71.2931 17.62 71.2731 18.14H76.4331C76.3931 17.32 76.1531 16.7 75.7131 16.28C75.2731 15.76 74.6631 15.5 73.8831 15.5ZM77.0231 21.77H80.5731C80.4331 23.09 79.9231 24.17 79.0431 25.01C78.1631 25.85 76.9531 26.27 75.4131 26.27C74.1531 26.27 73.0431 25.99 72.0831 25.43C71.1231 24.85 70.3831 24.07 69.8631 23.09C69.3431 22.09 69.0831 20.96 69.0831 19.7C69.0831 18.44 69.3431 17.32 69.8631 16.34C70.3831 15.34 71.1131 14.56 72.0531 14C72.9931 13.42 74.0731 13.13 75.2931 13.13C76.4731 13.13 77.5031 13.39 78.3831 13.91C79.2631 14.43 79.9431 15.16 80.4231 16.1C80.9031 17.04 81.1431 18.12 81.1431 19.34C81.1431 19.62 81.1331 19.87 81.1131 20.09C81.0931 20.31 81.0631 20.55 81.0231 20.81H71.2431C71.3031 21.69 71.5731 22.39 72.0531 22.91C72.5531 23.41 73.1731 23.66 73.9131 23.66C74.4931 23.66 74.9631 23.52 75.3231 23.24C75.6831 22.96 75.9231 22.47 76.0431 21.77H77.0231ZM99.7931 15.29C99.2531 15.29 98.7731 15.4 98.3531 15.62C97.9331 15.84 97.6031 16.17 97.3631 16.61C97.1231 17.05 97.0031 17.6 97.0031 18.26C97.0031 18.92 97.1231 19.47 97.3631 19.91C97.6031 20.35 97.9331 20.68 98.3531 20.9C98.7731 21.12 99.2531 21.23 99.7931 21.23C100.333 21.23 100.813 21.12 101.233 20.9C101.653 20.68 101.983 20.35 102.223 19.91C102.463 19.47 102.583 18.92 102.583 18.26C102.583 17.6 102.463 17.05 102.223 16.61C101.983 16.17 101.653 15.84 101.233 15.62C100.813 15.4 100.333 15.29 99.7931 15.29ZM99.7931 24.16C98.5131 24.16 97.3931 23.88 96.4331 23.32C95.4931 22.74 94.7631 21.95 94.2431 20.95C93.7231 19.95 93.4631 18.84 93.4631 17.62C93.4631 16.38 93.7231 15.27 94.2431 14.29C94.7631 13.31 95.4931 12.54 96.4331 11.98C97.3931 11.4 98.5131 11.11 99.7931 11.11C101.073 11.11 102.183 11.4 103.123 11.98C104.063 12.54 104.793 13.31 105.313 14.29C105.833 15.27 106.093 16.38 106.093 17.62C106.093 18.84 105.833 19.95 105.313 20.95C104.793 21.95 104.063 22.74 103.123 23.32C102.183 23.88 101.073 24.16 99.7931 24.16ZM84.0723 27.56V11.41H87.9023V13.05C88.4223 12.49 89.0323 12.05 89.7323 11.75C90.4323 11.43 91.1923 11.27 92.0123 11.27V15.29H91.0323C90.3523 15.29 89.7823 15.4 89.3223 15.62C88.8623 15.84 88.5123 16.2 88.2723 16.7C88.0323 17.2 87.9123 17.87 87.9123 18.71V27.56H84.0723Z" fill="#1E55F7"/>
    <path fillRule="evenodd" clipRule="evenodd" d="M94.2831 33.25C94.2831 34.4748 93.2778 35.48 92.053 35.48C90.8283 35.48 89.823 34.4748 89.823 33.25C89.823 32.0252 90.8283 31.02 92.053 31.02C93.2778 31.02 94.2831 32.0252 94.2831 33.25ZM87.013 30.3C87.013 31.5248 86.0078 32.53 84.783 32.53C83.5583 32.53 82.553 31.5248 82.553 30.3C82.553 29.0752 83.5583 28.07 84.783 28.07C86.0078 28.07 87.013 29.0752 87.013 30.3ZM77.723 29.78C78.9478 29.78 79.953 28.7748 79.953 27.55C79.953 26.3252 78.9478 25.32 77.723 25.32C76.4983 25.32 75.493 26.3252 75.493 27.55C75.493 28.7748 76.4983 29.78 77.723 29.78ZM72.243 24.1C72.243 25.3248 71.2377 26.33 70.013 26.33C68.7882 26.33 67.783 25.3248 67.783 24.1C67.783 22.8752 68.7882 21.87 70.013 21.87C71.2377 21.87 72.243 22.8752 72.243 24.1ZM62.403 22.38C63.6277 22.38 64.633 21.3748 64.633 20.15C64.633 18.9252 63.6277 17.92 62.403 17.92C61.1782 17.92 60.173 18.9252 60.173 20.15C60.173 21.3748 61.1782 22.38 62.403 22.38ZM57.273 16.65C57.273 17.8748 56.2677 18.88 55.043 18.88C53.8182 18.88 52.813 17.8748 52.813 16.65C52.813 15.4252 53.8182 14.42 55.043 14.42C56.2677 14.42 57.273 15.4252 57.273 16.65ZM47.693 14.42C48.9178 14.42 49.923 13.4148 49.923 12.19C49.923 10.9652 48.9178 9.96 47.693 9.96C46.4682 9.96 45.463 10.9652 45.463 12.19C45.463 13.4148 46.4682 14.42 47.693 14.42ZM42.073 8.2C42.073 9.42483 41.0678 10.43 39.843 10.43C38.6182 10.43 37.613 9.42483 37.613 8.2C37.613 6.97517 38.6182 5.97 39.843 5.97C41.0678 5.97 42.073 6.97517 42.073 8.2ZM31.983 4.73C33.2078 4.73 34.213 3.72483 34.213 2.5C34.213 1.27517 33.2078 0.27 31.983 0.27C30.7582 0.27 29.753 1.27517 29.753 2.5C29.753 3.72483 30.7582 4.73 31.983 4.73Z" fill="#1E55F7"/>
  </svg>
);

export default Sidebar;
